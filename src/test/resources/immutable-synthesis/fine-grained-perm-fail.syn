
###

predicate lseg(loc x, loc y) {
|  x == y        => {emp}
|  not (x == y)  => {[[x, 2]]@0 ** [x :-> 0]@1 ** [(x + 1) :-> nxt]@0 ** lseg1(nxt, y)[0,1]}
}
predicate lseg1(loc x, loc y) {
|  x == y        => {emp}
|  not (x == y)  => {[[x, 2]]@0 ** [x :-> 1]@1 ** [(x + 1) :-> nxt]@0 ** lseg1(nxt, y)[0,1]}
}

{lseg(x, s)[imm, mut] }
  void emit_skip(loc x)
{lseg1(x, s)[mut, mut] }

###