

#####

{true ; lsegS(x2, 0, s2)[I@a,I@b,M] ** ret :-> x2}
void sll_weaken (loc ret)
{ lseg0(X2, 0)[I@a,I@b,M] ** ret :-> x2 }

{true ; lsegS(x1, 0, s1)[M,M,M] ** lsegS(x2, 0, s2)[M,M,M] ** ret :-> x2}
void sll_append (loc x1, loc z1, loc ret)
{ lseg0(y, 0)[M,M,M] ** ret :-> y }


#####

void sll_append (loc x1, loc z1, loc ret) {
  let x22 = *ret;
  if (x1 == 0) {
    if (x22 == 0) {
    } else {
      let nxt2 = *(x22 + 1);
      *ret = nxt2;
      sll_weaken(ret);
      *ret = x22;
    }
  } else {
    let nxt2 = *(x1 + 1);
    sll_append(nxt2, z1, ret);
    let y12 = *ret;
    *(x1 + 1) = y12;
    *ret = x1;
  }
}
