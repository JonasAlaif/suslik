# -c 10 -o 10 -p true

#####

predicate PRIM_u8(int v) {
| true => { v >= 0 && v < 128; emp }
}

predicate Box_int(loc box, int v) {
| true => { PRIM_u8(v) }
}
predicate Enum(loc root, int v0, int v1) {
| true => { PRIM_u8(disc) ** EnumInternal(f, disc, v0, v1) }
}
predicate EnumInternal(loc root, int disc, int v0, int v1) {
| disc == 0 => { Box_int(a, v0) }
| disc == 1 => { Box_int(b, v1) }
}

{ v0+1 < 128 && v1-1 > 0 ; Enum(X, v0, v1) }
void box_and_swap(loc X)
{ v1p == v1-1 && v0p == v0+1 ; Enum(RESULT, v1p, v0p) }

#####
