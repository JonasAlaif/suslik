Step 5:
Allocate the right value

#####

{((S =i Union({v}, S1)) /\ (S1 =i Empty)) /\ (not (r == 0)) ; r :-> 0}

void foo(loc r, int v)

{(not (Y == 0)) /\ (S =i Union({v1}, Z1)) ; r :-> Y ** [Y, 2] ** Y :-> v1 ** (Y + 1) :-> nxt}

#####

void foo (loc r, int v) {
  let Y2 = malloc(2);
  *Y2 = v;
  *r = Y2;
}